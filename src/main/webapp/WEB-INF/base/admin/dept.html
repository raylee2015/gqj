<#assign base=request.contextPath />
<!DOCTYPE html>
<html>
<head>
<base id="base" href="${base}">
<meta charset="UTF-8">
<link rel="stylesheet" type="text/css"
	href="${base}/jquery-easyui-1.5/themes/default/easyui.css">
<link rel="stylesheet" type="text/css"
	href="${base}/jquery-easyui-1.5/themes/icon.css">
<link rel="stylesheet" type="text/css"
	href="${base}/jquery-easyui-1.5/demo/demo.css">
<script type="text/javascript"
	src="${base}/jquery-easyui-1.5/jquery.min.js"></script>
<script type="text/javascript"
	src="${base}/jquery-easyui-1.5/jquery.easyui.min.js"></script>
<script type="text/javascript"
	src="${base}/jquery-easyui-1.5/locale/easyui-lang-zh_CN.js"></script>
<script type="text/javascript">
	function editColumnFormatter(fieldValue, rowData, rowIndex) {
		var btn = '<a class="easyui-linkbutton" iconCls="icon-edit" onclick="openEditUI(\'edit\',\''
				+ rowIndex + '\')" href="javascript:void(0)">编辑</a>';
		return btn;
	}
	function openEditUI(opType, rowIndex) {
		if (opType == 'add') {
			$('#editUI').window('open');
			$('#deptNameTextBox').textbox('setValue', '');
		} else if (opType == 'edit') {
			var rowData = $('#datagrid').datagrid('getData').rows[rowIndex];
			$('#editUI').window('open');
			$('#deptNameTextBox').textbox('setValue', rowData.deptName);
		}
	}
	function closeEditUI() {
		$('#editUI').window('close');
	}
</script>
</head>
<body>
	<!-- 列表页面 -->
	<div class="easyui-layout" data-options="fit:true">
		<div region="west" ,collapsible="false" style="width: 200px;">
			<ul class="easyui-tree" url="deptTree.do" method="get" animate="true"
				lines="true"></ul>
		</div>
		<div region="center">
			<table id="datagrid" class="easyui-datagrid" rownumbers="true"
				toolbar="#toolbar" idField="dept_id" pagination="true" pageSize="30"
				checkOnSelect="false" url="deptList.do" method="get" fit="true">
				<thead>
					<tr>
						<th field="ck" checkbox="true"></th>
						<th field="op" formatter="editColumnFormatter">操作</th>
						<th field="deptName" width="100">部门名称</th>
						<th field="deptSort" width="80">排序号</th>
					</tr>
				</thead>
			</table>
			<div id="toolbar">
				<a href="#" class="easyui-linkbutton" iconCls="icon-add"
					plain="true" onclick="openEditUI('add')">添加</a> <a href="#"
					class="easyui-linkbutton" iconCls="icon-remove" plain="true"
					onclick="destroyUser()">删除</a>
			</div>
		</div>
	</div>

	<!--  详细界面 -->
	<div id="editUI" class="easyui-window" title="添加部门" closed="true"
		data-options="iconCls:'icon-save'"
		style="width: 400px; height: 125px; padding: 5px;">
		<div class="easyui-layout" data-options="fit:true">
			<div region="north" fit="true" border="false">
				<form id="form" method="post" style="width: 100%;">
					<table width="100%">
						<tr>
							<td width="22%">部门名称:</td>
							<td><input id="deptNameTextBox" class="easyui-textbox"
								prompt="部门名称" validType="length[3,10]"
								style="width: 100%; height: 32px"></td>
						</tr>
					</table>
				</form>
			</div>
			<div region="south" border="false"
				style="text-align: right; height: 30px">
				<a class="easyui-linkbutton" iconCls="icon-ok"
					href="javascript:void(0)" onclick="javascript:alert('ok')">保存</a> <a
					class="easyui-linkbutton" iconCls="icon-cancel"
					href="javascript:void(0)" onclick="closeEditUI()">关闭</a>
			</div>
		</div>
	</div>
</body>
</html>